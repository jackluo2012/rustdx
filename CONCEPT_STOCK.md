# åŒèŠ±é¡º/ä¸œæ–¹è´¢å¯Œæ¦‚å¿µè‚¡å¯¹ç…§åŠŸèƒ½

## ğŸ“– åŠŸèƒ½æ¦‚è¿°

rustdx ç°å·²æ”¯æŒ**åŒèŠ±é¡º/ä¸œæ–¹è´¢å¯Œæ¦‚å¿µæ¿å—**çš„æŸ¥è¯¢åŠŸèƒ½ï¼Œä¸é€šè¾¾ä¿¡è¡Œä¸šåˆ†ç±»å½¢æˆäº’è¡¥ã€‚

### ä¸»è¦ç‰¹æ€§

âœ… **æ¦‚å¿µæ¿å—æŸ¥è¯¢**: æ”¯æŒ 10+ ä¸ªçƒ­é—¨æ¦‚å¿µæ¿å—ï¼ˆæ–°èƒ½æºæ±½è½¦ã€é”‚ç”µæ± ã€èŠ¯ç‰‡ã€AIç­‰ï¼‰
âœ… **æˆåˆ†è‚¡åˆ—è¡¨**: æ¯ä¸ªæ¦‚å¿µæä¾›å‰ 20 åªæˆåˆ†è‚¡ä¿¡æ¯
âœ… **ä¸é€šè¾¾ä¿¡äº’è¡¥**: é€šè¾¾ä¿¡ç”¨äºè¡Œä¸šåˆ†ç±»ï¼Œä¸œæ–¹è´¢å¯Œç”¨äºæ¦‚å¿µçƒ­ç‚¹
âœ… **å®Œæ•´ç¤ºä¾‹**: æä¾›å¤šä¸ªä½¿ç”¨ç¤ºä¾‹å’Œç»¼åˆåº”ç”¨åœºæ™¯

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åŸºæœ¬ç”¨æ³•

```rust
use rustdx_complete::tcp::stock::get_concept_stocks;

fn main() {
    // è·å–æ–°èƒ½æºæ±½è½¦æ¦‚å¿µçš„æˆåˆ†è‚¡
    if let Some(stocks) = get_concept_stocks("æ–°èƒ½æºæ±½è½¦") {
        println!("æ–°èƒ½æºæ±½è½¦æ¦‚å¿µæˆåˆ†è‚¡:");
        for stock in stocks {
            println!("  {}: {}", stock.code, stock.name);
        }
    }
}
```

### 2. è·å–æ‰€æœ‰æ”¯æŒçš„æ¦‚å¿µ

```rust
use rustdx_complete::tcp::stock::get_concept_names;

fn main() {
    let concepts = get_concept_names();
    println!("æ”¯æŒçš„æ¦‚å¿µæ¿å—:");
    for concept in concepts {
        println!("  - {}", concept);
    }
}
```

### 3. è·å–æ¦‚å¿µä¿¡æ¯

```rust
use rustdx_complete::tcp::stock::get_concept_info;

fn main() {
    if let Some((name, count)) = get_concept_info("æ–°èƒ½æºæ±½è½¦") {
        println!("æ¦‚å¿µ: {}, æˆåˆ†è‚¡æ•°é‡: {}", name, count);
    }
}
```

## ğŸ“Š æ”¯æŒçš„æ¦‚å¿µæ¿å—

ç›®å‰æ”¯æŒä»¥ä¸‹çƒ­é—¨æ¦‚å¿µæ¿å—ï¼š

| æ¦‚å¿µåç§° | æ¿å—ä»£ç  | è¯´æ˜ |
|---------|---------|------|
| æ–°èƒ½æºæ±½è½¦ | BK0493 | 216åªæˆåˆ†è‚¡ |
| é”‚ç”µæ±  | BK0885 | 19åªæˆåˆ†è‚¡ |
| èŠ¯ç‰‡ | BK0456 | 91åªæˆåˆ†è‚¡ |
| å†›æ°‘èåˆ | BK0808 | 183åªæˆåˆ†è‚¡ |
| åŒ—æ–—å¯¼èˆª | BK0629 | 82åªæˆåˆ†è‚¡ |
| AIGCæ¦‚å¿µ | BK1111 | 123åªæˆåˆ†è‚¡ |
| èˆªæ¯æ¦‚å¿µ | BK0715 | 32åªæˆåˆ†è‚¡ |
| 5Gæ¦‚å¿µ | BK0476 | 67åªæˆåˆ†è‚¡ |
| æ•°å­—è´§å¸ | BK1035 | 28åªæˆåˆ†è‚¡ |
| äººå·¥æ™ºèƒ½ | BK0718 | 217åªæˆåˆ†è‚¡ |

> ğŸ’¡ **æç¤º**: æ¯ä¸ªæ¦‚å¿µè¿”å›å‰ 20 åªæˆåˆ†è‚¡ï¼Œå®Œæ•´æ•°æ®å¯é€šè¿‡ Python è„šæœ¬è·å–

## ğŸ”„ ä¸é€šè¾¾ä¿¡æ•°æ®çš„ç»“åˆ

### ç»¼åˆä½¿ç”¨ç¤ºä¾‹

```rust
use rustdx_complete::tcp::{Tcp, Tdx};
use rustdx_complete::tcp::stock::{FinanceInfo, get_industry_name, get_concept_stocks};

fn main() {
    let mut tcp = Tcp::new()?;

    // 1. é€šè¿‡é€šè¾¾ä¿¡è·å–è‚¡ç¥¨çš„è¡Œä¸šåˆ†ç±»
    let mut finance = FinanceInfo::new(1, "600519");  // è´µå·èŒ…å°
    finance.recv_parsed(&mut tcp)?;
    let info = &finance.result()[0];

    println!("è‚¡ç¥¨: {}", info.code);
    println!("è¡Œä¸š: {}", get_industry_name(info.industry));  // é…’ç±»
    println!("çœä»½: {}", get_province_name(info.province));  // è´µå·

    // 2. æŸ¥è¯¢è¯¥è‚¡ç¥¨å¯èƒ½æ‰€å±çš„æ¦‚å¿µæ¿å—
    if let Some(stocks) = get_concept_stocks("æ–°èƒ½æºæ±½è½¦") {
        println!("\næ–°èƒ½æºæ±½è½¦æ¦‚å¿µæˆåˆ†è‚¡:");
        for stock in stocks.iter().take(5) {
            println!("  {}: {}", stock.code, stock.name);
        }
    }
}
```

## ğŸ› ï¸ æ•°æ®æ›´æ–°

æ¦‚å¿µæ¿å—æ•°æ®æ˜¯é™æ€çš„ï¼Œå¯ä»¥é€šè¿‡ Python è„šæœ¬å®šæœŸæ›´æ–°ï¼š

```bash
# è¿è¡Œè„šæœ¬è·å–æœ€æ–°çš„æ¦‚å¿µæ¿å—æ•°æ®
python3 scripts/generate_concept_mapping.py
```

### æ›´æ–°æ­¥éª¤

1. è¿è¡Œè„šæœ¬è·å–æœ€æ–°æ•°æ®
2. å°†ç”Ÿæˆçš„ `concept_mapping.rs` å¤åˆ¶åˆ° `src/tcp/stock/` ç›®å½•
3. é‡æ–°ç¼–è¯‘é¡¹ç›®

## ğŸ“ æ–‡ä»¶ç»“æ„

```
rustdx/
â”œâ”€â”€ src/tcp/stock/
â”‚   â”œâ”€â”€ concept_mapping.rs       # æ¦‚å¿µæ¿å—æ˜ å°„æ¨¡å—
â”‚   â”œâ”€â”€ industry_mapping.rs      # è¡Œä¸šä»£ç æ˜ å°„æ¨¡å—
â”‚   â””â”€â”€ finance_info.rs          # è´¢åŠ¡ä¿¡æ¯ï¼ˆå«è¡Œä¸šä»£ç ï¼‰
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ generate_concept_mapping.py  # æ•°æ®ç”Ÿæˆè„šæœ¬
â”œâ”€â”€ examples/
â”‚   â”œâ”€â”€ test_concept_query.rs    # æ¦‚å¿µæŸ¥è¯¢ç¤ºä¾‹
â”‚   â”œâ”€â”€ test_industry_info.rs    # è¡Œä¸šä¿¡æ¯ç¤ºä¾‹
â”‚   â””â”€â”€ test_combined_info.rs    # ç»¼åˆä½¿ç”¨ç¤ºä¾‹
â””â”€â”€ CONCEPT_STOCK.md             # æœ¬æ–‡æ¡£
```

## ğŸ¯ åº”ç”¨åœºæ™¯

### 1. æ¿å—è½®åŠ¨åˆ†æ

```rust
// ç»“åˆé€šè¾¾ä¿¡è¡Œä¸šå’Œä¸œæ–¹è´¢å¯Œæ¦‚å¿µ
fn analyze_sector_rotation() {
    // è·å–çƒ­é—¨æ¦‚å¿µ
    let hot_concepts = vec!["æ–°èƒ½æºæ±½è½¦", "äººå·¥æ™ºèƒ½", "é”‚ç”µæ± "];

    // ç»“åˆè¡Œä¸šæ•°æ®è¿›è¡Œåˆ†æ
    for concept in hot_concepts {
        if let Some(stocks) = get_concept_stocks(concept) {
            println!("{} æ¦‚å¿µçƒ­é—¨è‚¡:", concept);
            // è¿›ä¸€æ­¥åˆ†ææ¯åªè‚¡ç¥¨çš„åŸºæœ¬é¢
        }
    }
}
```

### 2. è‚¡ç¥¨ç­›é€‰

```rust
// ç­›é€‰ç‰¹å®šåœ°åŒºå’Œæ¦‚å¿µçš„è‚¡ç¥¨
fn filter_stocks() {
    let target_province = "æ·±åœ³";
    let target_concept = "äººå·¥æ™ºèƒ½";

    // è·å–äººå·¥æ™ºèƒ½æ¦‚å¿µçš„æˆåˆ†è‚¡
    if let Some(stocks) = get_concept_stocks(target_concept) {
        // è¿›ä¸€æ­¥ç­›é€‰æ·±åœ³åœ°åŒºçš„è‚¡ç¥¨
        // ...
    }
}
```

### 3. æŠ•èµ„ç»„åˆåˆ†æ

```rust
// åˆ†ææŠ•èµ„ç»„åˆçš„è¡Œä¸šå’Œæ¦‚å¿µåˆ†å¸ƒ
fn analyze_portfolio(codes: Vec<&str>) {
    // ä½¿ç”¨é€šè¾¾ä¿¡è·å–è¡Œä¸šåˆ†å¸ƒ
    // ä½¿ç”¨æ¦‚å¿µæ¿å—è·å–ä¸»é¢˜æš´éœ²
    // ç”Ÿæˆåˆ†ææŠ¥å‘Š
}
```

## ğŸ“Š æ•°æ®æ¥æºå¯¹æ¯”

### é€šè¾¾ä¿¡ vs ä¸œæ–¹è´¢å¯Œ

| ç‰¹æ€§ | é€šè¾¾ä¿¡ | ä¸œæ–¹è´¢å¯Œæ¦‚å¿µ |
|------|--------|------------|
| æ•°æ®ç±»å‹ | è¡Œä¸šåˆ†ç±»ã€è´¢åŠ¡æ•°æ® | æ¦‚å¿µæ¿å—ã€å¸‚åœºçƒ­ç‚¹ |
| æ›´æ–°é¢‘ç‡ | å®æ—¶ | å®šæœŸæ›´æ–° |
| åˆ†ç±»æ ‡å‡† | å®˜æ–¹è¡Œä¸šåˆ†ç±» | å¸‚åœºä¸»é¢˜æ¦‚å¿µ |
| ä½¿ç”¨åœºæ™¯ | åŸºæœ¬é¢åˆ†æã€ä»·å€¼æŠ•èµ„ | çƒ­ç‚¹è¿½è¸ªã€ä¸»é¢˜æŠ•èµ„ |
| æ•°æ®æ¥æº | é€šè¾¾ä¿¡è¡Œæƒ…æ¥å£ | AKShare (ä¸œæ–¹è´¢å¯Œ) |

## ğŸ§ª è¿è¡Œç¤ºä¾‹

### æ¦‚å¿µæŸ¥è¯¢ç¤ºä¾‹

```bash
cargo run --example test_concept_query
```

**è¾“å‡ºç¤ºä¾‹**:
```
ğŸš€ æ¦‚å¿µè‚¡æŸ¥è¯¢ç¤ºä¾‹

ğŸ“— æ–°èƒ½æºæ±½è½¦æ¦‚å¿µæˆåˆ†è‚¡ï¼ˆå‰20åªï¼‰:
   ä»£ç          åç§°
   ------------------------------
   603278     å¤§ä¸šè‚¡ä»½
   002634     æ£’æ°è‚¡ä»½
   ...
```

### ç»¼åˆä¿¡æ¯ç¤ºä¾‹

```bash
cargo run --example test_combined_info
```

**è¾“å‡ºç¤ºä¾‹**:
```
ğŸš€ ç»¼åˆç¤ºä¾‹ï¼šé€šè¾¾ä¿¡è¡Œä¸š + ä¸œæ–¹è´¢å¯Œæ¦‚å¿µæ¿å—

1ï¸âƒ£  é€šè¿‡é€šè¾¾ä¿¡è·å–è‚¡ç¥¨è¡Œä¸šä¿¡æ¯:
   è‚¡ç¥¨           åç§°         è¡Œä¸š           çœä»½
   --------------------------------------------------
   000001       å¹³å®‰é“¶è¡Œ       é“¶è¡Œ           æ·±åœ³
   600519       è´µå·èŒ…å°       é…’ç±»           è´µå·
   300750       å®å¾·æ—¶ä»£       ç”µæ°”è®¾å¤‡         ç¦å»º

2ï¸âƒ£  é€šè¿‡ä¸œæ–¹è´¢å¯ŒæŸ¥è¯¢çƒ­é—¨æ¦‚å¿µæ¿å—:
   ğŸ“— æ–°èƒ½æºæ±½è½¦ æ¦‚å¿µ (æ˜¾ç¤ºå‰5åª):
   ...
```

## ğŸ“ API æ–‡æ¡£

### `get_concept_stocks(concept: &str) -> Option<Vec<ConceptStock>>`

è·å–æŒ‡å®šæ¦‚å¿µçš„æˆåˆ†è‚¡åˆ—è¡¨ã€‚

**å‚æ•°**:
- `concept`: æ¦‚å¿µåç§°ï¼ˆå¦‚ "æ–°èƒ½æºæ±½è½¦"ï¼‰

**è¿”å›**:
- `Option<Vec<ConceptStock>>`: æˆåˆ†è‚¡åˆ—è¡¨ï¼Œå¦‚æœæ¦‚å¿µä¸å­˜åœ¨åˆ™è¿”å› None

**ç¤ºä¾‹**:
```rust
let stocks = get_concept_stocks("æ–°èƒ½æºæ±½è½¦");
assert!(stocks.is_some());
```

### `get_concept_names() -> Vec<&'static str>`

è·å–æ‰€æœ‰æ”¯æŒçš„æ¦‚å¿µæ¿å—åç§°ã€‚

**è¿”å›**:
- `Vec<&'static str>`: æ¦‚å¿µåç§°åˆ—è¡¨

**ç¤ºä¾‹**:
```rust
let names = get_concept_names();
assert!(names.contains(&"æ–°èƒ½æºæ±½è½¦"));
```

### `get_concept_info(concept: &str) -> Option<(&'static str, usize)>`

è·å–æ¦‚å¿µæ¿å—çš„è¯¦ç»†ä¿¡æ¯ã€‚

**å‚æ•°**:
- `concept`: æ¦‚å¿µåç§°

**è¿”å›**:
- `Option<(&'static str, usize)>`: å…ƒç»„åŒ…å«ï¼ˆæ¦‚å¿µåç§°ï¼Œæˆåˆ†è‚¡æ€»æ•°ï¼‰

**ç¤ºä¾‹**:
```rust
let info = get_concept_info("æ–°èƒ½æºæ±½è½¦");
assert_eq!(info, Some(("æ–°èƒ½æºæ±½è½¦", 216)));
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®æ—¶æ•ˆæ€§**: æ¦‚å¿µæ¿å—æ•°æ®éœ€è¦å®šæœŸæ›´æ–°ï¼Œå»ºè®®æ¯å‘¨æˆ–æ¯æœˆè¿è¡Œä¸€æ¬¡æ›´æ–°è„šæœ¬
2. **æ•°æ®å®Œæ•´æ€§**: å½“å‰åªä¿å­˜æ¯ä¸ªæ¦‚å¿µçš„å‰ 20 åªæˆåˆ†è‚¡ï¼Œå®Œæ•´æ•°æ®å¯è‡ªè¡Œæ‰©å±•
3. **æ¦‚å¿µåŒ¹é…**: ä¸åŒæ•°æ®æºçš„æ¦‚å¿µåç§°å¯èƒ½ä¸åŒï¼Œéœ€è¦æ‰‹åŠ¨æ˜ å°„
4. **ç½‘ç»œä¾èµ–**: Python è„šæœ¬éœ€è¦ç½‘ç»œè¿æ¥æ‰èƒ½è·å–æœ€æ–°æ•°æ®

## ğŸ”§ æ‰©å±•åŠŸèƒ½

### æ·»åŠ æ–°çš„æ¦‚å¿µæ¿å—

1. ä¿®æ”¹ `scripts/generate_concept_mapping.py`ï¼Œæ·»åŠ æ–°çš„æ¦‚å¿µä»£ç 
2. è¿è¡Œè„šæœ¬ç”Ÿæˆæ–°çš„æ˜ å°„ä»£ç 
3. æ›´æ–° `src/tcp/stock/concept_mapping.rs`

### è‡ªå®šä¹‰æ¦‚å¿µæ¿å—

å¯ä»¥åŸºäºå®é™…éœ€æ±‚åˆ›å»ºè‡ªå·±çš„æ¦‚å¿µæ¿å—æ˜ å°„è¡¨ï¼š

```rust
pub fn get_custom_concept_stocks() -> Vec<ConceptStock> {
    vec![
        ConceptStock { code: "600519", name: "è´µå·èŒ…å°" },
        // ... æ›´å¤šè‚¡ç¥¨
    ]
}
```

## ğŸ“š ç›¸å…³èµ„æº

- [AKShare é¡¹ç›®åœ°å€](https://github.com/jindaxiang/akshare)
- [AKShare æ¦‚å¿µæ¿å—æ–‡æ¡£](https://akshare.akfamily.xyz/data/stock/stock.html)
- [é€šè¾¾ä¿¡è¡Œä¸šåˆ†ç±»](https://zhuanlan.zhihu.com/p/1961011810472814438)
- [ä¸œæ–¹è´¢å¯Œæ¦‚å¿µæ¿å—](https://q.10jqka.com.cn/gn/)

## ğŸ¯ æ€»ç»“

rustdx çš„æ¦‚å¿µæ¿å—åŠŸèƒ½ä¸ºç”¨æˆ·æä¾›äº†ï¼š

âœ… **åŒæ•°æ®æºæ”¯æŒ**: é€šè¾¾ä¿¡ï¼ˆè¡Œä¸šï¼‰+ ä¸œæ–¹è´¢å¯Œï¼ˆæ¦‚å¿µï¼‰
âœ… **çµæ´»åº”ç”¨**: åŸºæœ¬é¢åˆ†æ + çƒ­ç‚¹è¿½è¸ª
âœ… **æ˜“äºæ›´æ–°**: Python è„šæœ¬è‡ªåŠ¨ç”Ÿæˆæ˜ å°„ä»£ç 
âœ… **å®Œæ•´ç¤ºä¾‹**: å¤šä¸ªä½¿ç”¨åœºæ™¯å’Œç¤ºä¾‹ç¨‹åº

**ç»“åˆä½¿ç”¨å»ºè®®**:
- ä½¿ç”¨é€šè¾¾ä¿¡è¡Œä¸šåˆ†ç±»è¿›è¡ŒåŸºæœ¬é¢åˆ†æ
- ä½¿ç”¨ä¸œæ–¹è´¢å¯Œæ¦‚å¿µæ¿å—è¿½è¸ªå¸‚åœºçƒ­ç‚¹
- ä¸¤è€…ç»“åˆå¯ä»¥è·å¾—æ›´å…¨é¢çš„è‚¡ç¥¨ç‰¹å¾åˆ†æ

---

**Sources:**
- [é€šè¾¾ä¿¡å…¨èƒ½å®æˆ˜æŒ‡å—Â·æ¿å—ç®¡ç†](https://zhuanlan.zhihu.com/p/1961011810472814438)
- [AKShare-è‚¡ç¥¨æ•°æ®-æ¦‚å¿µæ¿å—](https://zhuanlan.zhihu.com/p/358386212)
- [é€šè¾¾ä¿¡æ¿å—æ¦‚å¿µå¦‚ä½•å’ŒåŒèŠ±é¡ºç»Ÿä¸€](https://www.douyin.com/search/%E9%80%9A%E8%BE%BE%E4%BF%A1%E6%9D%BF%E5%9D%97%E6%A6%82%E5%BF%B5%E5%A6%82%E4%BD%95%E5%92%8C%E5%90%8C%E8%8A%B1%E9%A1%BA%E7%BB%9F%E4%B8%80)
